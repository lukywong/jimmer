<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-preface">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Preface | Jimmer</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://github.com/jimmer/docs/preface"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Preface | Jimmer"><meta data-rh="true" name="description" content="1. The premise of the discussion"><meta data-rh="true" property="og:description" content="1. The premise of the discussion"><link data-rh="true" rel="icon" href="/jimmer/img/logo.png"><link data-rh="true" rel="canonical" href="https://github.com/jimmer/docs/preface"><link data-rh="true" rel="alternate" href="https://github.com/jimmer/docs/preface" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com/jimmer/zh/docs/preface" hreflang="zh"><link data-rh="true" rel="alternate" href="https://github.com/jimmer/docs/preface" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/jimmer/blog/rss.xml" title="Jimmer RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/jimmer/blog/atom.xml" title="Jimmer Atom Feed"><link rel="stylesheet" href="/jimmer/assets/css/styles.1f291466.css">
<link rel="preload" href="/jimmer/assets/js/runtime~main.0b5a2ef4.js" as="script">
<link rel="preload" href="/jimmer/assets/js/main.da35d617.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/jimmer/"><div class="navbar__logo"><img src="/jimmer/img/logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/jimmer/img/logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Jimmer documentation</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/jimmer/docs/preface">View more</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/jimmer/docs/preface" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/jimmer/zh/docs/preface" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">中文</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/babyfish-ct/jimmer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/jimmer/docs/preface">Preface</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/jimmer/docs/intro">Tutorial introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/jimmer/docs/get-started">Get started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/jimmer/docs/benchmark">Benchmark</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/jimmer/docs/jimmer-core/">jimmer-core subproject</a><button aria-label="Toggle the collapsible sidebar category &#x27;jimmer-core subproject&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/jimmer/docs/jimmer-sql/">jimmer-sql subproject</a><button aria-label="Toggle the collapsible sidebar category &#x27;jimmer-sql subproject&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/jimmer/docs/spring-graphql">Support for Spring GraphQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/jimmer/docs/demo">Demos</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/jimmer/docs/agreement">Agreement with developers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/jimmer/docs/discuss">Discuss</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/jimmer/docs/ecosystem">Ecosystem</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/jimmer/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Preface</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Preface</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-the-premise-of-the-discussion">1. The premise of the discussion<a class="hash-link" href="#1-the-premise-of-the-discussion" title="Direct link to heading">​</a></h2><p>A large part of the operations of OLTP type projects are aimed at the original data of the database. At this time, the object structure in the application is roughly the same as the data structure in the database, which is the scene discussed in this article.</p><p>The data types related to the calculation indicators introduced by business computing are not the same as the original structure of the database, and are not the scope of this article.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-disadvantages-of-the-current-factions">2. Disadvantages of the current factions<a class="hash-link" href="#2-disadvantages-of-the-current-factions" title="Direct link to heading">​</a></h2><p>Now, there are many frameworks for users to access RDBMS, which are generally divided into two factions</p><ul><li>Traditional ORM faction, JPA is the most well-known representative.</li><li>DTO Mapper faction, MyBatis is the most well-known representative.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-traditional-orm-faction-represented-by-jpa">2.1. Traditional ORM faction represented by JPA<a class="hash-link" href="#21-traditional-orm-faction-represented-by-jpa" title="Direct link to heading">​</a></h3><p>In traditional ORM, developers create entity classes that directly correspond to database table structures. From a mapping standpoint, it&#x27;s pretty straightforward.</p><p>Traditional ORM focuses on maintaining the relationship between objects, taking JPA as an example</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Book</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> books </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> entityManager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;select book from Book book &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;left join fetch book.store &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;left join fetch book.authors&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Book</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getResultList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>join fetch</code> in this example is a feature of JPA, which can use <code>SQL JOIN</code> to make the returned <code>Book</code> object no longer a single object, but with associated properties <code>store</code> and <code>authors</code>.</p><p>Through the optional <code>join fetch</code><em> (or other tricks, different ORM frameworks support different ways)</em>, the traditional ORM can return either a single data object or a complex object with associations, which is actually clipping capability of data structures.</p><p>This clipping capability is based on object granularity, but each object in the returned data structure is complete, that is to say, it lacks the clipping capability at the simple property level.</p><p>Simple property level clipping capability cannot be achieved. When there are many object properties so that the efficiency of querying all columns is very low, or when important properties need to be desensitized to low-privileged users, it will become a problem. Unfortunately, real projects are like this.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Although Hibernate starts from 3.x, simple (non-associative) properties can also be set to lazy. However, this feature is designed for lob properties, not for simple property level clipping, and the flexibility is very limited. not discussed</p></div></div><p>If you want the traditional ORM to accurately implement property-level clipping, you will use code like this</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">BookDTO</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> bookDTOs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> entityManager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;select new BookDTO(book.id, book.name) &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;from Book book&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">BookDTO</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getResultList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this example, we only want to query the <code>id</code> and <code>name</code> properties, we have to build a new type <code>BookDTO</code> which is  used as a carrier for the mutilated object with only two properties. At the same time when we get the simple property-level clipping ability, because <code>BookDTO</code> is a flat object rather than an entity object, the object-level clipping ability is lost.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>It is precisely because this usage loses the core capabilities of ORM that it is a non-mainstream usage in traditional ORM practice and is rarely used.</p></div></div><p>Another problem with traditional ORMs is that the returned data is very complex and difficult to use directly.</p><p>For unloaded lazy properties, developers can easily ignore them in Json serialization, that&#x27;s not a problem.</p><p>The real trouble is that there are two-way associations between objects, whereas front-end and microservice clients prefer to see a tree of objects with only one-way associations.</p><p>For example, <code>TreeNode</code> entity has both an upward <code>parent</code> property and a downward <code>childNodes</code> property.</p><ul><li>Some businesses may need to query a node and all its subordinates, and return a data structure such as <code>aggregateRoot-&gt;childNodes-&gt;childNodes-&gt;...</code>;</li><li>Some businesses query a node and all its superiors, and return a data structure like <code>aggregateRoot-&gt;parent-&gt;parent-&gt;...</code>.</li></ul><p>Therefore, you cannot simply specify which of <code>parent</code> and <code>childNodes</code> is exposed and which is hidden. You can&#x27;t solve this problem simply with the <code>@JsonIgnore</code> annotation, it&#x27;s a very tricky one.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-dto-mapper-faction-represented-by-mybatis">2.2. DTO Mapper faction represented by MyBatis<a class="hash-link" href="#22-dto-mapper-faction-represented-by-mybatis" title="Direct link to heading">​</a></h3><p>From the above description, we know that traditional ORM has two disadvantages.</p><ol><li>The mainstream usage that facilitates the use of traditional ORM capabilities, although it has flexible object-level clipping capabilities, but it loses the simple property-level clipping capabilities.</li><li>The entity objects returned by the ORM are too complex to be returned directly and cannot interact with HTTP.</li></ol><p>These two problems are caused by the weak expressive ability of data objects. In fact, they can be solved by defining the DTO classes required by a specific business senarios.</p><p>Why write code to convert ORM entities to DTOs when people are destined to define specific business-related DTO types? Why not just implement the mapping from SQL results to DTOs directly?</p><p>Therefore, the DTO Mapper faction is recognized by the developers, and this faction proposes a very different solution. Developers no longer define entity classes directly corresponding to the database structure, but directly define DTO types for each specific business senario, such as:</p><ul><li>Create class <code>Book</code> to express the lonely book objects</li><li>Create class <code>BookWithStore</code> to express the book objects with the associated property <code>store</code></li><li>Create class <code>BookWithAuthors</code> to express the book objects with the associated property <code>authors</code></li><li>Create class <code>BookWithStoreAndAuthors</code> to represent book objects with associated properties <code>store</code> and <code>authors</code></li></ul><p>Each business API returns the DTO object it needs, and each API uses a specific SqlResultMapper to map specific query results to specific DTO.</p><p>However, this approach is equally problematic</p><ol><li><p>In the above example, we only show object-level clipping, not simple property-level clipping, and the depth of the object tree is also very shallow. If not, the number of DTO types will be large, and it can even be described as <strong>exploding</strong>. At this time, there will be so many DTO classes that it is difficult to even get a name. Developers even need to incorporate industry-specific naming conventions to avoid very long class names.</p></li><li><p>There are too many DTOs. Although different DTOs are different, they have many similar parts, which are highly redundant. The system loses compactness, and development and testing costs balloon.</p></li><li><p>Once new requirements are introduced, the structure of the database changes, and multiple redundant services need to be modified.</p></li></ol><p>To avoid problems 2 and 3, SQL mapper fragments or business code can be reused as much as possible, but this destroys the simplicity of the system and the code becomes difficult to understand, which is the inevitable price of excessive use of low-value reuse.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-advantages-of-jimmer">3. Advantages of Jimmer<a class="hash-link" href="#3-advantages-of-jimmer" title="Direct link to heading">​</a></h2><p>From the above discussion, we know that</p><ul><li>Traditional ORM faction: The advantage is that it directly corresponds to the database structure and provides a unified perspective; but the disadvantage is that only object-level clipping is performed on the returned data format, and there is no simple property-level clipping, and the returned data structure is difficult to use directly.</li><li>DTO Mapper faction: The advantage is that the DTO object is simple, and the data structure represented by the returned aggregate root only contains one-way associations; but the disadvantage is that the number of DTO types is seriously inflated, although different but similar, the development cost and testing cost are both very high.</li></ul><p>Jimmer perfectly integrates the strengths of the two factions, and walks out of the another way. Therefore, Jimmer cannot be simply compared to any of solutation in the above factions.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-no-dto-mode-dynamic-entities">3.1. No DTO Mode: Dynamic Entities<a class="hash-link" href="#31-no-dto-mode-dynamic-entities" title="Direct link to heading">​</a></h3><p>In jimmer</p><ul><li><p>Entity objects are dynamic, any object property, whether simple or associated, can be missing.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>For Jimmer&#x27;s entity objects, not specifying a property and specifying a property as null are two completely different things.</p></div></div></li><li><p>Directly reading missing properties of an object in Java or Kotlin code will result in an exception; however, when JSON serialization, missing properties are automatically ignored without exception.</p></li><li><p>Although two-way associations can be defined between different types when declaring entity types; however, when a specific business senario needs to instantiate objects, only one-way associations can be created between entity objects, ensuring that any data structure can use a simple aggregate root object to express.</p></li></ul><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Dynamic entity itself is not DTO, but it has all the characteristics of DTO object, any entity object tree can directly participate in HTTP interaction.</p><p>Dynamic entities are the architectural foundation of the entire ORM.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-query-arbitrarily-complex-data-structures">3.2. Query arbitrarily complex data structures<a class="hash-link" href="#32-query-arbitrarily-complex-data-structures" title="Direct link to heading">​</a></h3><p>It perfectly supports object-level and simple property-level clipping capabilities. Users can delineate a local data structure from the complete relational model of database, that is, an arbitrarily complex tree structure, and query the entire data structure by returning a dynamic entity tree.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Let RDBMS have GraphQL-like functionality. Even if your project has nothing to do with GraphQL technology, your RDMBS has all its advantages.</p><p>Jimmer does a better job than GraphQL, it even supports recursive queries on self-associative properties.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-modify-arbitrarily-complex-data-structures">3.3. Modify arbitrarily complex data structures<a class="hash-link" href="#33-modify-arbitrarily-complex-data-structures" title="Direct link to heading">​</a></h3><p>Users can pass arbitrarily complex trees of dynamic objects to Jimmer, saving the entire tree in one sentence.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>It can be understood as the inverse function of GraphQL.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-powerful-caching-mechanism">3.3. Powerful caching mechanism<a class="hash-link" href="#33-powerful-caching-mechanism" title="Direct link to heading">​</a></h3><ul><li>There is no restriction on the user&#x27;s caching technology selection, and the user can choose any caching technology.</li><li>Internally supports object caching and associative caching, and in complex data structure queries, the two are organically combined on demand behind the scenes. The final effect presented to the user is a cache of arbitrary complex data structures, rather than a cache of simple objects.</li><li>Automatically guarantees the data consistency of cache, just simply call Jimmer&#x27;s API after receiving the database binlog push.</li><li>The caching mechanism is 100% transparent to developers, and whether or not caching is used has no impact on business code.</li></ul><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Although RDBMS has unparalleled expressive power, it has one obvious disadvantage: the performance of navigating and tracking other data according to the relationship is not ideal.</p><p>Associative caching can alleviate this problem to a large extent and make RDBMS even more powerful.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="34-strongly-typed-sql-dsl-more-practical-than-native-sql">3.4 Strongly typed SQL DSL more practical than native SQL<a class="hash-link" href="#34-strongly-typed-sql-dsl-more-practical-than-native-sql" title="Direct link to heading">​</a></h3><ul><li>Found typos and type matching errors at compile time.</li><li>Strongly typed SQL DSL can be mixed with native SQL expressions at will, allowing the unique capabilities of specific database products to be used while unifying and abstracting different databases.</li><li>Provides multi-table join operations that are more convenient and practical than native SQL at the cost of abandoning individual SQL writing ways that are almost impossible to use in actual projects.</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/babyfish-ct/jimmer/tree/main/doc/docs/preface.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/jimmer/docs/intro"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Tutorial introduction</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-the-premise-of-the-discussion" class="table-of-contents__link toc-highlight">1. The premise of the discussion</a></li><li><a href="#2-disadvantages-of-the-current-factions" class="table-of-contents__link toc-highlight">2. Disadvantages of the current factions</a><ul><li><a href="#21-traditional-orm-faction-represented-by-jpa" class="table-of-contents__link toc-highlight">2.1. Traditional ORM faction represented by JPA</a></li><li><a href="#22-dto-mapper-faction-represented-by-mybatis" class="table-of-contents__link toc-highlight">2.2. DTO Mapper faction represented by MyBatis</a></li></ul></li><li><a href="#3-advantages-of-jimmer" class="table-of-contents__link toc-highlight">3. Advantages of Jimmer</a><ul><li><a href="#31-no-dto-mode-dynamic-entities" class="table-of-contents__link toc-highlight">3.1. No DTO Mode: Dynamic Entities</a></li><li><a href="#32-query-arbitrarily-complex-data-structures" class="table-of-contents__link toc-highlight">3.2. Query arbitrarily complex data structures</a></li><li><a href="#33-modify-arbitrarily-complex-data-structures" class="table-of-contents__link toc-highlight">3.3. Modify arbitrarily complex data structures</a></li><li><a href="#33-powerful-caching-mechanism" class="table-of-contents__link toc-highlight">3.3. Powerful caching mechanism</a></li><li><a href="#34-strongly-typed-sql-dsl-more-practical-than-native-sql" class="table-of-contents__link toc-highlight">3.4 Strongly typed SQL DSL more practical than native SQL</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/jimmer/docs/intro">Tutorial</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 jimmer, Inc.</div></div></div></footer></div>
<script src="/jimmer/assets/js/runtime~main.0b5a2ef4.js"></script>
<script src="/jimmer/assets/js/main.da35d617.js"></script>
</body>
</html>